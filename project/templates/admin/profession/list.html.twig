{% extends 'base.html.twig' %}

{% block title %}Liste des Professions{% endblock %}

{% block body %}
    <h1 class="page-title">Liste des Professions</h1>

    {% for label, messages in app.flashes %}
        <div class="flash-{{ label }}">
            {% for message in messages %}
                <p>{{ message }}</p>
            {% endfor %}
        </div>
    {% endfor %}

    <a href="{{ path('admin_profession_new') }}" class="btn btn-success mb-3">
        <i class="fas fa-plus"></i> Nouvelle Profession
    </a>

    <table class="table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nom de la Profession</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for profession in professions %}
                <tr>
                    <td>{{ profession.id }}</td>
                    <td>{{ profession.name }}</td>
                    <td>
                        <a href="{{ path('admin_profession_edit', { id: profession.id }) }}" class="btn btn-sm btn-primary">
                            <i class="fas fa-edit"></i> Éditer
                        </a>

                        {# Formulaire de suppression #}
                        <form method="post" action="{{ path('admin_profession_delete', { id: profession.id }) }}" style="display:inline-block;" onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer cette profession ?');">
                            <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ profession.id) }}">
                            <button class="btn btn-sm btn-danger" type="submit">
                                <i class="fas fa-trash"></i> Supprimer
                            </button>
                        </form>
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="3">Aucune profession disponible.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
